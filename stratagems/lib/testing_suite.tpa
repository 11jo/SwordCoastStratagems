DEFINE_ACTION_FUNCTION testing_suite BEGIN

ACTION_IF is_bg2 BEGIN

   // force rest
   
   <<<<<<<< .../stratagems-inline/forcerest.baf
IF
  !Global("DW_rest_party","GLOBAL",0)
THEN
    RESPONSE #100
             SetGlobal("DW_rest_party","GLOBAL",0)
             RestParty()
             Continue()
END
   >>>>>>>>

   LAF extend STR_VAR script="baldur baldur25" top=forcerest inline=yes END

   // test pocket-plane irenicus

   <<<<<<<< .../stratagems-inline/ppiren_global.baf
IF
  Global("DW_pp_irenicus","GLOBAL",1)
THEN
   RESPONSE #100
       SetGlobal("DW_pp_irenicus","GLOBAL",2)
       SetGlobal("AsylumPlot","GLOBAL",53)
       ActionOverride(Player1,LeaveAreaLUA("AR1515","",[945.1010],NW))
       ActionOverride(Player2,LeaveAreaLUA("AR1515","",[947.1013],NW))
       ActionOverride(Player3,LeaveAreaLUA("AR1515","",[849.1020],NW))
       ActionOverride(Player4,LeaveAreaLUA("AR1515","",[991.1009],NW))
       ActionOverride(Player5,LeaveAreaLUA("AR1515","",[997.994],NW))
       ActionOverride(Player6,LeaveAreaLUA("AR1515","",[996.1087],NW))
       Continue()
END



   >>>>>>>>

LAF extend STR_VAR script="baldur baldur25" top=ppiren_global inline=yes END

   <<<<<<<< .../stratagems-inline/ppiren_ar1616.baf
IF
  Global("DW_pp_irenicus","GLOBAL",2)
THEN
   RESPONSE #100
       SetGlobal("DW_pp_irenicus","GLOBAL",3)
       CreateCreature("ppireni2",[800.1100],NW)
       Continue()
END

IF
  Global("DW_pp_irenicus","GLOBAL",3)
THEN
   RESPONSE #100
       SetGlobal("DW_pp_irenicus","GLOBAL",0)
       ActionOverride("ppireni2",Enemy())
       Continue()
END
   >>>>>>>>

LAF extend_area_script STR_VAR area=ar1516 top=ppiren_ar1616 inline=yes END

    // test Firkraag battle

<<<<<<<< .../stratagems-inline/firkraag_global.baf
IF
  Global("DW_firkraag","GLOBAL",1)
THEN
   RESPONSE #100
       SetGlobal("DW_firkraag","GLOBAL",2)
       ActionOverride(Player1,LeaveAreaLUA("AR1203","",[1269.1263],NW))
       ActionOverride(Player2,LeaveAreaLUA("AR1203","",[1259.1263],NW))
       ActionOverride(Player3,LeaveAreaLUA("AR1203","",[1279.1263],NW))
       ActionOverride(Player4,LeaveAreaLUA("AR1203","",[1269.1253],NW))
       ActionOverride(Player5,LeaveAreaLUA("AR1203","",[1269.1273],NW))
       ActionOverride(Player6,LeaveAreaLUA("AR1203","",[1259.1273],NW))
       Continue()
END

>>>>>>>>

LAF extend STR_VAR script="baldur baldur25" top=firkraag_global inline=yes END

<<<<<<<< .../stratagems-inline/firkraag_ar1203.baf
IF
  Global("DW_firkraag","GLOBAL",2)
THEN
   RESPONSE #100
       SetGlobal("DW_firkraag","GLOBAL",0)
       ActionOverride("firkra02",SetNumTimesTalkedTo(1))
       ActionOverride("firkra02",Enemy())
       ActionOverride("firmag01",DestroySelf())
       Continue()
END
>>>>>>>>
LAF extend_area_script STR_VAR area=ar1203 top=firkraag_ar1203 inline=yes END


// test Nizi

<<<<<<<< .../stratagems-inline/nizi_global.baf
IF
  Global("DW_nizi","GLOBAL",1)
THEN
   RESPONSE #100
       SetGlobal("DW_nizi","GLOBAL",2)
       ActionOverride(Player1,LeaveAreaLUA("AR2807","",[616.459],NW))
       ActionOverride(Player2,LeaveAreaLUA("AR2807","",[616.479],NW))
       ActionOverride(Player3,LeaveAreaLUA("AR2807","",[616.439],NW))
       ActionOverride(Player4,LeaveAreaLUA("AR2807","",[626.459],NW))
       ActionOverride(Player5,LeaveAreaLUA("AR2807","",[606.459],NW))
       ActionOverride(Player6,LeaveAreaLUA("AR2807","",[616.469],NW))
       Continue()
END

>>>>>>>>

LAF extend STR_VAR script="baldur baldur25" top=nizi_global inline=yes END

<<<<<<<< .../stratagems-inline/nizi_ar.baf
IF
  Global("DW_nizi","GLOBAL",2)
THEN
   RESPONSE #100
       SetGlobal("DW_nizi","GLOBAL",0)
       ActionOverride("dragblac",SetNumTimesTalkedTo(1))
       ActionOverride("dragblac",Enemy())
       Continue()
END
>>>>>>>>
LAF extend_area_script STR_VAR area=ar2807 top=nizi_ar inline=yes END

// test Adalon

<<<<<<<< .../stratagems-inline/ada_global.baf
IF
  Global("DW_ada","GLOBAL",1)
THEN
   RESPONSE #100
       SetGlobal("DW_ada","GLOBAL",2)
       ActionOverride(Player1,LeaveAreaLUA("AR2102","",[1180.1306],NW))
       ActionOverride(Player2,LeaveAreaLUA("AR2102","",[1190.1306],NW))
       ActionOverride(Player3,LeaveAreaLUA("AR2102","",[1170.1306],NW))
       ActionOverride(Player4,LeaveAreaLUA("AR2102","",[1180.1316],NW))
       ActionOverride(Player5,LeaveAreaLUA("AR2102","",[1180.1296],NW))
       ActionOverride(Player6,LeaveAreaLUA("AR2102","",[1170.1296],NW))
       Continue()
END

>>>>>>>>

LAF extend STR_VAR script="baldur baldur25" top=ada_global inline=yes END

<<<<<<<< .../stratagems-inline/ada_ar.baf
IF
  Global("DW_ada","GLOBAL",2)
THEN                                 
   RESPONSE #100
       SetGlobal("DW_ada","GLOBAL",0)
       ActionOverride("udsilver",SetNumTimesTalkedTo(1))
       ActionOverride("udsilver",Enemy())
       Continue()
END
>>>>>>>>
LAF extend_area_script STR_VAR area=ar2102 top=ada_ar inline=yes END

// test final battle with Jon

<<<<<<<< .../stratagems-inline/hellslay_global.baf
IF
  Global("DW_hellslay","GLOBAL",1)
THEN                                 
   RESPONSE #100
       SetGlobal("DW_hellslay","GLOBAL",2)
       SetGlobal("teardoor","GLOBAL",5)
       ActionOverride(Player1,LeaveAreaLUA("AR2900","",[1974.552],NW))
       ActionOverride(Player2,LeaveAreaLUA("AR2900","",[1964.552],NW))
       ActionOverride(Player3,LeaveAreaLUA("AR2900","",[1984.552],NW))
       ActionOverride(Player4,LeaveAreaLUA("AR2900","",[1974.562],NW))
       ActionOverride(Player5,LeaveAreaLUA("AR2900","",[1974.542],NW))
       ActionOverride(Player6,LeaveAreaLUA("AR2900","",[1964.562],NW))
       Continue()
END

>>>>>>>>

LAF extend STR_VAR script="baldur baldur25" top=hellslay_global inline=yes END

<<<<<<<< .../stratagems-inline/hellslay_ar2900.baf
IF
  Global("DW_hellslay","GLOBAL",2)
THEN
    RESPONSE #100
       SetGlobal("DW_hellslay","GLOBAL",0)
       SetGlobal("EnteredArea","AR2900",1)
       SetGlobal("PlayerIntro","AR2900",1)
       CreateCreature("HELLJON",[2009.513],S)
       StartCutScene("cut85c")
END

>>>>>>>>

LAF extend_area_script STR_VAR area=ar2900 top=hellslay_ar2900 inline=yes END

// test Demogorgon battle

<<<<<<<< .../stratagems-inline/demogorgon_global.baf
IF
  Global("DW_demogorgon","GLOBAL",1)
THEN                                 
   RESPONSE #100
       SetGlobal("DW_demogorgon","GLOBAL",0)
       SetGlobal("KnightsDead","GLOBAL",1)
       ActionOverride(Player1,LeaveAreaLUA("AR3020","",[930.912],NW))
       ActionOverride(Player2,LeaveAreaLUA("AR3020","",[930.922],NW))
       ActionOverride(Player3,LeaveAreaLUA("AR3020","",[930.902],NW))
       ActionOverride(Player4,LeaveAreaLUA("AR3020","",[920.912],NW))
       ActionOverride(Player5,LeaveAreaLUA("AR3020","",[940.912],NW))
       ActionOverride(Player6,LeaveAreaLUA("AR3020","",[940.922],NW))
       Continue()
END

>>>>>>>>

LAF extend STR_VAR script="baldur baldur25" top=demogorgon_global inline=yes END

// test Kangaxx

<<<<<<<< .../stratagems-inline/kangaxx_global.baf
IF
  Global("DW_kangaxx","GLOBAL",1)
THEN                                 
   RESPONSE #100
       SetGlobal("DW_kangaxx","GLOBAL",2)
       ActionOverride(Player1,LeaveAreaLUA("AR0331","",[611.536],NW))
       ActionOverride(Player2,LeaveAreaLUA("AR0331","",[566.591],NW))
       ActionOverride(Player3,LeaveAreaLUA("AR0331","",[510.626],NW))
       ActionOverride(Player4,LeaveAreaLUA("AR0331","",[467.665],NW))
       ActionOverride(Player5,LeaveAreaLUA("AR0331","",[378.673],NW))
       ActionOverride(Player6,LeaveAreaLUA("AR0331","",[449.718],NW))
       Continue()
END
>>>>>>>>

LAF extend STR_VAR script="baldur baldur25" top=kangaxx_global inline=yes END


<<<<<<<< .../stratagems-inline/kangaxx_ar0331.baf
IF
  Global("DW_kangaxx","GLOBAL",2)
THEN                                 
   RESPONSE #100
       SetGlobal("DW_kangaxx","GLOBAL",0)
       CreateCreature("HLKANG",[633.518],SW)
       Continue()
END
>>>>>>>>

LAF extend_area_script STR_VAR area=ar0331 top=kangaxx_ar0331 inline=yes END

// test C6 Bodhi fight

<<<<<<<< .../stratagems-inline/c6bodhi_global.baf

IF
  Global("DW_c6bodhi","GLOBAL",1)
THEN
    RESPONSE #100
       SetGlobal("DW_c6bodhi","GLOBAL",2)
       ActionOverride(Player1,LeaveAreaLUA("AR0809","",[1240.490],NE))
       ActionOverride(Player2,LeaveAreaLUA("AR0809","",[1245.495],NE))
       ActionOverride(Player3,LeaveAreaLUA("AR0809","",[1250.500],NE))
       ActionOverride(Player4,LeaveAreaLUA("AR0809","",[1255.505],NE))
       ActionOverride(Player5,LeaveAreaLUA("AR0809","",[1260.510],NE))
       ActionOverride(Player6,LeaveAreaLUA("AR0809","",[1265.515],NE))
       Continue()
END
>>>>>>>>

LAF extend STR_VAR script="baldur baldur25" top=c6bodhi_global inline=yes END

<<<<<<<< .../stratagems-inline/c6bodhi.d
APPEND c6bodhi

IF WEIGHT #-1000 ~Global("DW_c6bodhi","GLOBAL",2)~ THEN BEGIN bodhi_tangle SAY ~Let's cut to the chase, sweetheart.~
IF ~~ THEN DO ~SetGlobal("DW_c6bodhi","GLOBAL",0)~ GOTO 22 END
END
>>>>>>>>

COMPILE ".../stratagems-inline/c6bodhi.d"

// spellhold item confiscation

<<<<<<<< .../stratagems-inline/pp_items_global.baf
IF
  Global("DW_ppitems","GLOBAL",1)
THEN
    RESPONSE #100
       SetGlobal("DW_ppitems","GLOBAL",2)
       ActionOverride(Player1,LeaveAreaLUA("AR1515","",[1000.1000],NE))
       ActionOverride(Player2,LeaveAreaLUA("AR1515","",[1000.990],NE))
       ActionOverride(Player3,LeaveAreaLUA("AR1515","",[1000.1010],NE))
       ActionOverride(Player4,LeaveAreaLUA("AR1515","",[990.1010],NE))
       ActionOverride(Player5,LeaveAreaLUA("AR1515","",[1010.1000],NE))
       ActionOverride(Player6,LeaveAreaLUA("AR1515","",[990.1000],NE))
       SetGlobal("AsylumPlot","GLOBAL",20)
       Continue()
END

IF
  Global("DW_ppitems","GLOBAL",3)
THEN
    RESPONSE #100
       SetGlobal("DW_ppitems","GLOBAL",4)
       ActionOverride(Player1,LeaveAreaLUA("AR0012","",[1000.1000],NE))
       ActionOverride(Player2,LeaveAreaLUA("AR0012","",[1000.990],NE))
       ActionOverride(Player3,LeaveAreaLUA("AR0012","",[1000.1010],NE))
       ActionOverride(Player4,LeaveAreaLUA("AR0012","",[990.1010],NE))
       ActionOverride(Player5,LeaveAreaLUA("AR0012","",[1010.1000],NE))
       ActionOverride(Player6,LeaveAreaLUA("AR0012","",[990.1000],NE))
       SetGlobal("AsylumPlot","GLOBAL",20)
       Continue()
END
>>>>>>>>

LAF extend STR_VAR script="baldur baldur25" top=pp_items_global inline=yes END

<<<<<<<< .../stratagems-inline/pp_items_ar1515.baf
IF
  Global("DW_ppitems","GLOBAL",2)
THEN
    RESPONSE #100
             CreateCreatureObject("ppireni1",Player1,0,0,0)
             SetGlobal("DW_ppitems","GLOBAL",3)
END
>>>>>>>>

LAF extend_area_script STR_VAR area=ar1515 top=pp_items_ar1515 inline=yes END

<<<<<<<< .../stratagems-inline/iren_add.d
APPEND ppireni2

IF WEIGHT #-1000 ~Global("DW_ppitems","GLOBAL",3)~ THEN BEGIN irenicus_shortcut SAY ~Only losers banter.~
IF ~~ THEN DO ~SetGlobal("DW_ppitems","GLOBAL",4)~ GOTO 19 END
END

APPEND ppdrimov

IF WEIGHT #-1000 ~Global("DW_ppitems","GLOBAL",4)NumTimesTalkedTo(0)~ THEN BEGIN imoen_shortcut_1 SAY ~Find me inside, already.~
IF ~~ THEN EXIT END
END

APPEND ppdrimo

IF WEIGHT #-1000 ~Global("DW_ppitems","GLOBAL",4)NumTimesTalkedTo(0)~ THEN BEGIN imoen_shortcut_2 SAY ~So much for Bhaal.~
IF ~~ THEN DO ~SetGlobal("DW_ppitems","GLOBAL",5)~ GOTO 6 END
END
>>>>>>>>

COMPILE ".../stratagems-inline/iren_add.d"

<<<<<<<< .../stratagems-inline/dw#ppire.baf
IF
	True()
THEN
	RESPONSE #100
		CutSceneId(Player1)
                ApplySpell(Player2,NOHOLD_PARTY) // SPIN862.SPL (No such index)
		ApplySpell(Player3,NOHOLD_PARTY) // SPIN862.SPL (No such index)
		ApplySpell(Player4,NOHOLD_PARTY) // SPIN862.SPL (No such index)
		ApplySpell(Player5,NOHOLD_PARTY) // SPIN862.SPL (No such index)
		ApplySpell(Player6,NOHOLD_PARTY) // SPIN862.SPL (No such index)
		ActionOverride(Player2,MakeUnselectable(1))
		ActionOverride(Player3,MakeUnselectable(1))
		ActionOverride(Player4,MakeUnselectable(1))
		ActionOverride(Player5,MakeUnselectable(1))
		ActionOverride(Player6,MakeUnselectable(1))
		LeaveAreaLUAPanic("AR1515","",[1637.888],NW)
		LeaveAreaLUA("AR1515","",[1637.888],NW)
		ActionOverride(Player2,LeaveAreaLUA("AR1515","",[1647.888],NW))
		ActionOverride(Player3,LeaveAreaLUA("AR1515","",[1627.888],NW))
		ActionOverride(Player4,LeaveAreaLUA("AR1515","",[1637.898],NW))
		ActionOverride(Player5,LeaveAreaLUA("AR1515","",[1637.878],NW))
		ActionOverride(Player6,LeaveAreaLUA("AR1515","",[1627.878],NW))
END
>>>>>>>>

COMPILE ".../stratagems-inline/dw#ppire.baf"

END // end of BG2 bit



ACTION_IF is_bg1 BEGIN




END


END