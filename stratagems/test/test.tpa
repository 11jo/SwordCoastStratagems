<<<<<<<< .../stratagems-inline/rndtres.2da
2DA      V1.0
*
         1        2        3        4        5        6        7        8        9        10       11       12       13       14       15       16       17       18       19       20       21       22       23       24       25       26       27       28       29       30       31       32       33       34       35       36       37       38       39       40
>>>>>>>>

DEFINE_ACTION_FUNCTION test BEGIN

ACTION_IF GAME_IS iwdee BEGIN


    LAF include STR_VAR file=research_iwd_scripts.tph END
    LAF iwd_script_explore END

END ELSE BEGIN

     COPY_EXISTING_REGEXP GLOB "[A-Z0-9][A-Z0-9].*\.cre" override
        INNER_PATCH "%SOURCE_RES%" BEGIN
           READ_ASCII 0x0 bdtest (2)
        END
        PATCH_IF "%bdtest%" STRING_COMPARE_CASE "BD" BEGIN
           SET shouts=0
           FOR (offset=0x248;offset<=0x268;offset+=8) BEGIN
              READ_ASCII offset script
              PATCH_IF "%script%" STRING_EQUAL_CASE shout BEGIN
                  SET shouts=1
              END
           END
           PATCH_IF shouts BEGIN
               PATCH_PRINT "%SOURCE_RES%"
           END
         END
     BUT_ONLY
END


END

