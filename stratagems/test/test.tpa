<<<<<<<< .../stratagems-inline/rndtres.2da
2DA      V1.0
*
         1        2        3        4        5        6        7        8        9        10       11       12       13       14       15       16       17       18       19       20       21       22       23       24       25       26       27       28       29       30       31       32       33       34       35       36       37       38       39       40
>>>>>>>>

DEFINE_ACTION_FUNCTION test BEGIN

ACTION_IF GAME_IS iwdee BEGIN


    LAF include STR_VAR file=research_iwd_scripts.tph END
    LAF iwd_script_explore END

END ELSE BEGIN


     COPY_EXISTING "jaheir12.cre" override
        LPF CRE_insert_script_second STR_VAR arguments="dw#test" END

     /*
     COPY_EXISTING_REGEXP GLOB ".*\.cre" override
           SET shouts=0
           FOR (offset=0x248;offset<=0x268;offset+=8) BEGIN
              READ_ASCII offset script
              PATCH_IF "%script%" STRING_EQUAL_CASE shout BEGIN
                  SET shouts=1
              END
           END
           PATCH_IF shouts BEGIN
               READ_STRREF 0x8 name
               READ_BYTE 0x274 specifics
               PATCH_IF specifics>0 BEGIN
                  LPF log_this STR_VAR file=shout_specifics.txt input="%name%=%specifics% (%SOURCE_RES%)" END
               END
               READ_BYTE 0x273 class
               PATCH_IF (class=155 || class=212) BEGIN
                 READ_BYTE 0x234 level
                  PATCH_IF ( level>1 || !(class=155) ) BEGIN
                     LPF log_this STR_VAR file=shout_innocent.txt input="%name% (%SOURCE_RES%)" END
                  END
               END ELSE BEGIN
                  READ_BYTE 0x270 allegiance
                  PATCH_IF allegiance=255 BEGIN
                     LPF log_this STR_VAR file=shout_enemy.txt input="%name% (%SOURCE_RES%)" END
                  END ELSE BEGIN
                     LPF CRE_is_evil RET value END
                     PATCH_IF value BEGIN
                          LPF log_this STR_VAR file=shout_evil.txt input="%name% (%SOURCE_RES%)" END
                     END ELSE BEGIN
                         LPF CRE_is_good RET value END
                         PATCH_IF value BEGIN
                             LPF log_this STR_VAR file=shout_good.txt input="%name% (%SOURCE_RES%)" END
                         END ELSE BEGIN
                             LPF log_this STR_VAR file=shout_neutral.txt input="%name% (%SOURCE_RES%)" END
                         END
                     END
                  END
               END
           

           END
     BUT_ONLY
     */
END


END

